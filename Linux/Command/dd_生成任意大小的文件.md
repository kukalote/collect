### Linux cmd dd_生成任意大小的文件

出于各种原因, 你也许需要生成一个包含随机数据的文件。这可能是用于执行测试的测试文件, 比如用一个大文件作为输入来测试应用程序的效率; 也可能是测试文件分割, 或是创建**环回文件系统** (**环回文件** 自身包含文件系统, 这种文件可以像物理设备一样使用 `mount` 命令进行挂载)。

#### 实战演练

创建特定大小的大文件最简单的方法就是利用 `dd` 命令。`dd` 命令会克隆给定的输入内容, 然后将一模一样的一份副本写入到输出。 stdin、设备文件、普通文件等都可作为输入, stdout、设备文件、普通文件等也可作为输出。

    $ dd if=/dev/zero of=jumk.data bs=1024 count=1
    1+0 records in
    1+0 records out
    1024 bytes transferred in 0.000036 secs (28443492 bytes/sec)
    
该命令会创建一个 1k 大小的 junk.data 文件。看一下参数 : 

- if 代表输入文件 (input file);
- of 代表输出文件 (output file);
- bs 代表以字节为单位的块大小 (block size);
- count 代表需要被复制的块数。

> 使用 `dd` 命令时一定得留意, 该命令运行在设备底层。要是一不小心出了岔子, 搞不好会把磁盘清空或是损坏数据。所以一定要反复检查 `dd` 命令所用的语法是否正确, 尤其是参数of=。

在上面的例子中, 我们将 bs 指定为 1MB, count 指定为 1, 于是得到了一个大小为 1MB 的文件。如果把 bs 设为 2MB, count 设为 2, 那么总文件大小就是 4MB。

块大小可以使用各种计量单位。任意一个字符都可以置于数字之后来指定字节数 : 

单元大小 | 代码
----|---
字节 (1B) | c
字 (2B) | w
块 (512B) | b
千字节 (1024B) | k
兆字节 (1024KB) | M
吉字节 (1024MB) | G

`/dev/zero` 是一个字符设备, 它会不断返回 0 值字节 (\0)。

如果不指定输入参数 (if), 默认情况下 `dd` 会从 stdin 中读取输入。与之类似, 如果不指定输出参数 (of), 则 `dd` 会将 stdout 作为默认输出。

也可以用 `dd` 命令传输大量数据并观察命令输出来测量内存的操作速度(如, 前一个例子中所示1024 bytes transferred in 0.000036 secs (28443492 bytes/sec) )。