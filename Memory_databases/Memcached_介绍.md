# Memcached_介绍

<!-- create time: 2016-03-17 17:36:57  -->

<!-- This file is created from $MARBOO_HOME/.media/starts/default.md
本文件由 $MARBOO_HOME/.media/starts/default.md 复制而来 -->

### Memcached是什么?
`Memcached`是由Danga Interactive开发的,高性能的,分布式的内存对象缓存系统,用于在动态应用中减少数据库负载,提升访问速度。

### Memcached能缓存什么？
通过在内存里维护一个统一的巨大的hash表,Memcached能够用来存储各种格式的数据,包括图像、视频、文件以及数据库检索的结果等。

### Memcached快么？
非常快。`Memcached`使用了libevent（如果可以的话,在linux下使用`epoll`）来均衡任何数量的打开链接,使用非阻塞的网络I/O,对内部对象实现引用计数(因此,针对多样的客户端,对象可以处在多样的状态),使用自己的页块分配器和哈希表,因此虚拟内存不会产生碎片并且虚拟内存分配的时间复杂度可以保证为O(1).。


Danga Interactive为提升Danga Interactive的速度研发了`Memcached`。目前,LiveJournal.com每天已经在向一百万用户提供多达两千万次的页面访问。而这些,是由一个由web服务器和数据库服务器组成的集群完成的。`Memcached`几乎完全放弃了任何数据都从数据库读取的方式,同时,它还缩短了用户查看页面的速度、更好的资源分配方式,以及`Memcache`失效时对数据库的访问速度。



### Memcached的特点
`Memcached`的缓存是一种分布式的,可以让不同主机上的多个用户同时访问,因此解决了共享内存只能单机应用的局限,更不会出现使用数据库做类似事情的时候,磁盘开销和阻塞的发生。

在保守情况下`memcached`的最大同时连接数为`200`,这和Linux线程能力有关系,这个数值是可以调整的。

`Memcached`内存使用方式也和`APC`不同。`APC`是基于共享内存和`MMAP`的,`memcachd`有自己的内存分配算法和管理方式,它和共享内存没有关系,也没有共享内存的限制,通常情况下,每个`memcached`进程可以管理`2GB`的内存空间,如果需要更多的空间,可以增加进程数。 


需要注意的是，`memcached`使用内存管理数据，所以它是易失的，当服务器重启，或者`memcached`进程中止，数据便会丢失，所以`memcached`不能用来持久保存数据。很多人的错误理解，`memcached`的性能非常好，好到了内存和硬盘的对比程度，其实`memcached`使用内存并不会得到成百上千的读写速度提高。它的实际瓶颈在于网络连接，它和使用磁盘的数据库系统相比，好处在于它本身非常“轻”，因为没有过多的开销和直接的读写方式，它可以轻松应付非常大的数据交换量，所以经常会出现两条千兆网络带宽都满负荷了，`memcached`进程本身并不占用多少CPU资源的情况。

`memcached`本地读写速度要比直接PHP内存数组慢几十倍，而`APC`、共享内存方式都和直接数组差不多。可见，如果只是本地级缓存，使用memcached是非常不划算的。
